name: Feature

# on: [push]
on:
  push:
    branches:
      - '*' # matches every branch that doesn't contain a '/'
      - '*/*' # matches every branch containing a single '/'
      - '**' # matches every branch
      - '!master' # excludes master

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node: ['15']

    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
      - uses: microsoft/playwright-github-action@v1
      - run: node -v
      - run: yarn
      - run: yarn build
      - run: yarn lint
      - run: node --version
      - run: whoami
#      - run: sudo apt-get install xvfb xfonts-100dpi xfonts-75dpi xfonts-cyrillic  dbus-x11 fluxbox libxss1
#      - run: export DISPLAY=:99.0
#      - run: Xvfb :99 &
      - run: xvfb-run --auto-servernum -- yarn e2e
      #- run: npx playwright test
      #      - run: node ./node_modules/.bin/playwright test

      - run: echo 'pass!!'

  #   steps:
  #     - uses: actions/checkout@v2
  #     - uses: actions/setup-node@v2
  #       with:
  #         node-version: '15.5.x'
  #     - run: |
  #         yarn
  #         yarn lint
  #     - run: ls -lart node_modules
  #     - run: yarn lint
